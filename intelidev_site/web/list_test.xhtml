<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      >

    <ui:composition template="./loged_template.xhtml">
        <ui:define name="content">

	    <script type="text/javascript">//<![CDATA[
                var gMap;

                window.onload = function () {
                    startMap();
                };

                function reload_map() {
                    //alert("Teste ");
                    //var markers_from_java = [#{mapEquipNav.string_markes}];
                    //startMap(markers_from_java);
                    startMap();
                }

                function startMap() {
                    var myLatlng = new google.maps.LatLng(-30.013729, -51.209331);
                    var mapOptions = {
                        zoom: 15,
                        center: myLatlng,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    gMap = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
                    //setMarkers(gMap, markers);
                }
				
                function setMarkers(map, locations) {
                    //var mark, i;
                    var bounds = new google.maps.LatLngBounds();
                    var infowindow = new google.maps.InfoWindow();
                    var img_folder = '../resources/pics/';
                    for (i = 0; i < locations.length; i++) {

                        var image = {
                            url: img_folder + locations[i][3],
                            scaledSize: new google.maps.Size(48, 48) // scaled size'
                        };

                        var marker = new google.maps.Marker({
                            position: new google.maps.LatLng(locations[i][0], locations[i][1]),
                            map: map,
                            icon: image
                        });

                        //extend the bounds to include each marker's position
                        bounds.extend(marker.position);

                        google.maps.event.addListener(marker, 'mouseover', (function (marker, i) {
                            return function () {
                                infowindow.setContent(locations[i][2]);
                                infowindow.open(map, marker);
                            };
                        })(marker, i));
                    }
                    map.fitBounds(bounds);
                }
                //]]> 
            </script>
		
            <!-- Mapa -->
            <div id="map_canvas" class="center_content" style="height: 1000px"></div> 

            <h:form>
                <h:inputHidden value="#{dadosBeanCrt.set_list_dados(loginBeanCrt.usuario)}" />
            </h:form>
			
			
        </ui:define>
    </ui:composition>

</html>
